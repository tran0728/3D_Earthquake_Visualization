var x=Object.defineProperty;var L=(d,e,t)=>e in d?x(d,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[e]=t;var i=(d,e,t)=>(L(d,typeof e!="symbol"?e+"":e,t),t);import{W as q,S as C,P as I,C as E,V as z,M,a as _,b as v,c as S,d as U,G as F,e as P,T as f,L as V,F as g,f as m,g as R,h as B,i as A,D as W}from"./vendor.js";const G=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const h of r.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerpolicy&&(r.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?r.credentials="include":a.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(a){if(a.ep)return;a.ep=!0;const r=t(a);fetch(a.href,r)}};G();class H{constructor(e=60,t=1.333,s=1,a=1e3){i(this,"aspectRatio");i(this,"fov");i(this,"znear");i(this,"zfar");i(this,"renderer");i(this,"scene");i(this,"camera");i(this,"clock");this.fov=e,this.aspectRatio=t,this.znear=s,this.zfar=a,this.renderer=new q,this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement),this.resize(),window.addEventListener("resize",()=>{this.resize()},!1),window.addEventListener("mousedown",r=>{this.onMouseDown(r)}),window.addEventListener("mouseup",r=>{this.onMouseUp(r)}),window.addEventListener("mousemove",r=>{this.onMouseMove(r)}),window.addEventListener("keydown",r=>{this.onKeyDown(r)}),window.addEventListener("keyup",r=>{this.onKeyUp(r)}),this.scene=new C,this.camera=new I(this.fov,this.aspectRatio,this.znear,this.zfar),this.clock=new E}start(){this.createScene(),this.mainLoop()}mainLoop(){this.update(this.clock.getDelta()),this.renderer.render(this.scene,this.camera),window.requestAnimationFrame(()=>this.mainLoop())}resize(){this.renderer.setSize(window.innerWidth,window.innerHeight);var e=new z;this.renderer.getViewport(e);var t=window.innerWidth/window.innerHeight;this.aspectRatio>t?this.renderer.setViewport(0,(window.innerHeight-window.innerWidth/this.aspectRatio)/2,window.innerWidth,window.innerWidth/this.aspectRatio):this.renderer.setViewport((window.innerWidth-window.innerHeight*this.aspectRatio)/2,0,window.innerHeight*this.aspectRatio,window.innerHeight)}onMouseDown(e){}onMouseUp(e){}onMouseMove(e){}onKeyDown(e){}onKeyUp(e){}}class w extends M{constructor(e,t,s){super();i(this,"startTime");i(this,"duration");i(this,"magnitude");this.startTime=t.date.getTime(),this.magnitude=t.normalizedMagnitude,this.duration=s,this.position.copy(e),this.geometry=new _(.05);var a=new v;a.color=new S(1,1,0),this.material=a}getPlaybackLife(e){return U.clamp(Math.abs(e/1e3-this.startTime/1e3)/this.duration,0,1)}}class N extends F{constructor(){super();i(this,"earthMesh");i(this,"earthMaterial");i(this,"debugMaterial");this.earthMesh=new M,this.earthMaterial=new v,this.debugMaterial=new P}initialize(){this.earthMaterial.map=new f().load("./data/earth-1k.png"),this.earthMaterial.map.minFilter=V,this.earthMesh.material=this.earthMaterial,this.debugMaterial.wireframe=!0;var e=-Math.PI,t=Math.PI/2,s=2*Math.PI/80,a=Math.PI/80,r=[];for(let n=0;n<=80;n++)for(let o=0;o<=80;o++)r.push(e+s*o,t-a*n,0);var h=[];for(let n=0;n<6561;n++)h.push(0,0,1);var l=1,b=0,k=82,y=82,T=0,D=81,c=[];for(let n=0;n<40;n++){var u=n*81;for(let o=0;o<25;o++)c.push(l+o+u,b+o+u,k+o+u),c.push(y+o+u,T+o+u,D+o+u)}for(let n=0;n<80;n++)var u=n*81;var p=[];for(let n=0;n<80;n++)for(let o=0;o<80;o++)p.push(.0125*o,1-.0125*n);this.earthMesh.geometry.setAttribute("position",new g(r,3)),this.earthMesh.geometry.setAttribute("normal",new g(h,3)),this.earthMesh.geometry.setAttribute("uv",new g(p,2)),this.earthMesh.geometry.setIndex(c),this.add(this.earthMesh)}update(e){}animateEarthquakes(e){this.children.forEach(t=>{t instanceof w&&t.getPlaybackLife(e)==1&&this.remove(t)})}createEarthquake(e){var s=new m(Math.random()*6-3,Math.random()*4-2,0),a=new w(s,e,29030400);this.add(a)}convertLatLongToPlane(e,t){return new m}convertLatLongToSphere(e,t){return new m}toggleDebugMode(e){e?this.earthMesh.material=this.debugMaterial:this.earthMesh.material=this.earthMaterial}}class K{constructor(e){i(this,"date");i(this,"longitude");i(this,"latitude");i(this,"magnitude");i(this,"normalizedMagnitude");this.date=new Date,this.date.setUTCFullYear(parseInt(e.substring(12,16))),this.date.setUTCMonth(parseInt(e.substring(17,19))),this.date.setUTCDate(parseInt(e.substring(20,22))),this.date.setUTCHours(parseInt(e.substring(24,26))),this.date.setUTCMinutes(parseInt(e.substring(27,29))),this.date.setUTCSeconds(parseFloat(e.substring(30,35))),this.longitude=parseFloat(e.substring(44,52)),this.latitude=parseFloat(e.substring(37,44)),this.magnitude=parseFloat(e.substring(66,70)),this.normalizedMagnitude=this.magnitude}}class j{constructor(e){i(this,"earthquakes");i(this,"loaded");i(this,"maxMagnitude");i(this,"minMagnitude");i(this,"nextIndex");this.earthquakes=[],this.loaded=!1,this.maxMagnitude=0,this.minMagnitude=1/0,this.nextIndex=0;var t=new R;t.load(e,s=>{var a=s.toString().split(`
`);a.forEach(r=>{if(r.length>30){var h=new K(r);this.earthquakes.push(h),h.magnitude>this.maxMagnitude?this.maxMagnitude=h.magnitude:h.magnitude<this.minMagnitude&&(this.minMagnitude=h.magnitude)}}),this.earthquakes.forEach(r=>{r.normalizedMagnitude=(r.magnitude-this.minMagnitude)/(this.maxMagnitude-this.minMagnitude)}),this.loaded=!0})}reset(){this.nextIndex=0}getNextQuake(e){for(var t=e.getTime();this.nextIndex<this.earthquakes.length;)return this.earthquakes[this.nextIndex].date.getTime()<t?(this.nextIndex++,this.earthquakes[this.nextIndex-1]):null;return null}getMaxTime(){return this.earthquakes[this.earthquakes.length-1].date.getTime()}getMinTime(){return this.earthquakes[0].date.getTime()}}class O extends H{constructor(){super(60,1920/1080,.1,50);i(this,"earth");i(this,"gui");i(this,"earthquakeDB");i(this,"currentTime");i(this,"mouseDrag");i(this,"mouseVector");i(this,"date");i(this,"viewMode");i(this,"playbackSpeed");i(this,"debugMode");this.gui=new B,this.earth=new N,this.earthquakeDB=new j("./data/earthquakes.txt"),this.currentTime=1/0,this.mouseDrag=!1,this.mouseVector=new A,this.date="",this.viewMode="Map",this.playbackSpeed=.5,this.debugMode=!1}createScene(){this.camera.position.set(0,0,3.25),this.camera.lookAt(0,0,0),this.camera.up.set(0,1,0);var e=new W("white",1.5);e.position.set(10,10,15),this.scene.add(e),this.scene.background=new f().load("./data/stars.png"),this.earth.initialize(),this.scene.add(this.earth);var t=this.gui.addFolder("Earthquake Controls"),s=t.add(this,"date");s.name("Current Date"),s.listen();var a=t.add(this,"viewMode",{Map:"Map",Globe:"Globe"});a.name("View Mode"),a.onChange(l=>{});var r=t.add(this,"playbackSpeed",0,1);r.name("Playback Speed");var h=t.add(this,"debugMode");h.name("Debug Mode"),h.onChange(l=>{this.toggleDebugMode(l)}),this.gui.width=300,t.open()}update(e){if(!this.earthquakeDB.loaded)return;const t=3e10;this.currentTime+=t*this.playbackSpeed*e,this.currentTime>this.earthquakeDB.getMaxTime()&&(this.currentTime=this.earthquakeDB.getMinTime(),this.earthquakeDB.reset());var s=new Date;s.setTime(this.currentTime),this.date=s.getUTCMonth()+"/"+s.getUTCDate()+"/"+s.getUTCFullYear();for(var a=this.earthquakeDB.getNextQuake(s);a;)a=this.earthquakeDB.getNextQuake(s);this.earth.update(e),this.earth.animateEarthquakes(this.currentTime)}toggleDebugMode(e){this.earth.toggleDebugMode(e)}onMouseDown(e){this.mouseDrag=!0}onMouseUp(e){this.mouseDrag=!1}onMouseMove(e){this.mouseDrag,this.mouseVector.set(e.x,e.y)}}var Q=new O;Q.start();
